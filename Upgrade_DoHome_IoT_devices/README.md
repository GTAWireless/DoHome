Einglish | <a href="https://github.com/SmartArduino/DoHome/blob/master/Upgrade_DoHome_IoT_devices/READMECN.md">中文版</a>

<p><h2><span style=";font-family:等线;font-size:16px">Notice:</span></h2></p><p><span style=";font-family:等线;font-size:16px">Before upgrade third-party firmware, please contact: </span><a href="mailto:song@doit.am"><span style="text-decoration:underline;"><span style="font-family: 等线;color: rgb(5, 99, 193)">song@doit.am</span></span></a></p><p><span style=";font-family:等线;font-size:16px">Your firmware must be no greater than 512KB</span></p><p><span style=";font-family:等线;font-size:16px">The third-party firmware should be developed with esp-open-sdk, Arduino, ESP8266_NONOS_SDK, or ESP8266_RTOS_SDK (not IDF)</span></p><p>Go to Amazon or aliexpress  to buy a socket</p><p>Link：</p><p>https://www.amazon.com/gp/product/B07WSYQ38T</p><p>https://www.aliexpress.com/item/4000113988602.html</p><h2><strong><span style="font-family: &#39;等线 Light&#39;;font-size: 18px">Software &amp; Hardware</span></strong></h2><h3><strong><span style="font-family: 等线;font-size: 18px">1.1 Software</span></strong></h3><p><span style=";font-family:等线;font-size:17px">Download upgrade tool from the following link: </span></p><p><span style=";font-family:等线;font-size:17px">Link：</span><br/><span style="font-size: 14px; font-family: arial, helvetica, sans-serif;"><a href="http://support.doiting.com/DoHome.zip">http://support.doiting.com/DoHome.zip</a></span><br/></p><p><span style=";font-family:等线;color:rgb(255,0,0);font-size: 16px">Downloard </span><span style=";font-family:等线;color:rgb(255,0,0);font-size: 16px">DoHome_JRE_32.zip</span><span style=";font-family:等线;color:rgb(255,0,0);font-size: 16px">&nbsp;for Windows 32</span><span style=";font-family:等线;color:rgb(255,0,0);font-size: 16px"><span style="font-family:等线">；</span></span><span style=";font-family:等线;color:rgb(255,0,0);font-size: 16px">Download </span><span style=";font-family:等线;color:rgb(255,0,0);font-size: 16px">DoHome_JRE_64.zip</span><span style=";font-family:等线;color:rgb(255,0,0);font-size: 16px">&nbsp;for Windows 64</span></p><h3><strong><span style="font-family: 等线;font-size: 18px">1.2 Hardware</span></strong></h3><p><span style=";font-family:等线;font-size: 16px">A computer with </span><span style=";font-family:等线;font-size: 16px">Wi-Fi adaptor</span></p><h2><strong><span style="font-family: &#39;等线 Light&#39;;font-size: 18px">2、Steps</span></strong></h2><h3><strong><span style="font-family: 等线;font-size: 18px">2.1 </span></strong><strong><span style="font-family: 等线;font-size: 18px">Make sure that your current firmware is running on first slot</span></strong></h3><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">Connect your device’s WiFi (If your firmware is DoHome firmware, the WiFi is named as “DoHome_xxxx”). After WiFi connected, run the download tool and select the “Third-party upgrade” tab, shown as the following figure.</span></p><p style="text-align: center;"><img src="http://support.doiting.com/static/ueditor/php/upload/image/1567130888487228.png" title="1567130888487228.png" alt="EV$L86[$]M1O~Z77MTQCEB5.png"/></p><p><span style=";font-family:等线;font-size: 16px">Click “Slot check” button, then the text field below the button will show some info such as “Slot=1”, it means that the current firmware runs at slot 1 (There are two slots on ESP).&nbsp;</span></p><p style="text-align: center;"><img src="http://support.doiting.com/static/ueditor/php/upload/image/1567131227436661.png" title="1567131227436661.png" alt=")MS5YSIGZMXME{N}3@H$_YW.png"/></p><p style="text-align:center"><span style=";font-family:等线;font-size:16px">Fig. 2 &nbsp;check slot</span></p><p><br/></p><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">To upgrade firmware to third-party firmware, the current firmware must be running on the first slot! </span><span style=";font-family:等线;font-size: 16px">In other word, when you press the button </span><span style=";font-family:等线;font-size: 16px">“Slot check” the info shown in the text field must be “Slot=1”.</span></p><p><span style=";font-family:等线;font-size: 16px">If yes, go to 2.2 to do next step, otherwise, refer to subsection 3.5 to change slot.</span></p><h3><strong><span style="font-family: 等线;font-size: 18px">2.2 </span></strong><strong><span style="font-family: 等线;font-size: 18px">Upgrade to a transitional firmware</span></strong></h3><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">A transitional firmware is utilized to upgrade to the third-party firmware. The transitional firmware is within the folder named “prepare”. There are two files named “u1.bin” and “u2.bin” respectively.</span></p><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">Firstly, make your device connect to a router, and then your computer connect the same router. Run the upgrade tool “</span><span style=";font-family:等线;font-size: 16px">DoHome_v21.exe</span><span style=";font-family:等线;font-size: 16px">”, and select the “DoHome upgrade” tab view. Input the transitional firmware’s path as the following figure. Secondly, input the target device IP (You can find the IP from the router console).</span></p><p style="text-align: center;"><img src="http://support.doiting.com/static/ueditor/php/upload/image/1567131456410766.png" title="1567131456410766.png" alt="REL)FR61~4[P(65L`J_C5CV.png"/></p><p style="text-align:center"><span style=";font-family:等线;font-size:16px">Fig. 3 Upgrade view</span></p><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px"><span style="font-family:等线">No need to fill in other areas。click </span>Start upgrading start upgrading。</span><span style=";font-family:等线;font-size: 16px">&nbsp;Leave &nbsp;the other text field along, and then click “Start upgrading” button to start upgrading to transitional firmware.</span></p><h3><strong><span style="font-family: 等线;font-size: 18px">2.3 </span></strong><strong><span style="font-family: 等线;font-size: 18px">Connect the device which upgrade to transitional firmware with router</span></strong></h3><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">If the target device is upgraded to the transitional firmware, the device will generate a WiFi named as “Upgrade-xxxxxxx”, when the device power up. Connect to the WiFi if you find it on your phone, as shown in the following figures.</span></p><p style="text-align:center"><img src="http://support.doiting.com/static/ueditor/php/upload/image/1567131628605874.png" title="1567131628605874.png" alt="NY%B1SV[VH36W06FD}[YWN7.png"/><img src="http://support.doiting.com/static/ueditor/php/upload/image/1567131635765508.png" title="1567131635765508.png" alt="}D(NUBJ45GLOYIDEJ$X@F]6.png"/></p><p style="text-align:center"><span style=";font-family:等线;font-size:16px">Fig. 4 </span><span style=";font-family:等线;font-size:16px">Connect to the WiFi generate by transitional firmware</span></p><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">When your phone is connected to the WiFi “Upgrade-xxxxxxx”, a login page will be &nbsp;popup, as shown in Fig. 4. This is a portal to tell the device which router to connect. Select the router you want your device to connect and input the password, then click “Join” button. Finally, the device will connect to the router automatically.</span></p><h3><strong><span style="font-family: 等线;font-size: 18px">2.4 </span></strong><strong><span style="font-family: 等线;font-size: 18px">Upgrade to third-party firmware</span></strong></h3><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">Make sure your computer is connect to the router you selected in the step 2.3. Run the upgrade tool on computer, go to “</span><span style=";font-family:等线;font-size: 16px">Third-party upgrade</span><span style=";font-family:等线;font-size: 16px">” tab view.</span></p><p style="text-align: center;"><img src="http://support.doiting.com/static/ueditor/php/upload/image/1567131715928253.png" title="1567131715928253.png" alt="EV$L86[$]M1O~Z77MTQCEB5.png"/></p><p style="text-align:center"><span style=";font-family:等线;font-size:16px">Fig. 5 </span><span style=";font-family:等线;font-size:16px">third-party firmware upgrade</span></p><p><span style=";font-family:等线;font-size: 16px">Click “Scan device” button, the following text field will list the device</span><span style=";font-family:等线;font-size: 16px">&nbsp;(which is upgraded to the transitional firmware)</span><span style=";font-family:等线;font-size: 16px">&nbsp;info</span><span style=";font-family:等线;font-size: 16px">. The info includes device IP, which will be used in the next step.</span></p><p style="text-align: center;"><img src="http://support.doiting.com/static/ueditor/php/upload/image/1567131915732446.png" title="1567131915732446.png" alt="E@EE4G$2P9E]{0$K)FG~W9Y.png"/><img src="http://support.doiting.com/static/ueditor/php/upload/image/1567131942214520.png" title="1567131942214520.png" alt="3RW{DKBRM22OMTG4BN1TWH5.png"/></p><p style="text-align: center;"><span style=";font-family:等线;font-size:16px">Fig. 6 S</span><span style=";font-family:等线;font-size:16px">c</span><span style=";font-family:等线;font-size:16px">an device</span></p><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">The “dev_id” list in the text field is the same as the WiFi name generated by the device that upgrade to transitional firmware. The IP address follow up with “dev_id” should be filled in the text field named “Device IP”. In the “Firmware path” text field, Input your third-party firmware path.</span></p><p style="text-align: center;"><img src="http://support.doiting.com/static/ueditor/php/upload/image/1567131978516677.png" title="1567131978516677.png" alt="3`2VSFYEK83)@{MUE~P7%OG.png"/></p><p style="text-align:center"><span style=";font-family:等线;font-size:16px">Fig. 7 </span><span style=";font-family:等线;font-size:16px">Third-party firmware upgrade</span></p><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">Finally, click “Start upgrade” button to start upgrading progress.</span></p><h2><strong><span style="font-family: &#39;等线 Light&#39;;font-size: 18px">3、</span></strong><strong><span style="font-family: &#39;等线 Light&#39;;font-size: 18px">FAQ</span></strong></h2><h3><strong><span style="font-family: 等线;font-size: 18px">3.1 </span></strong><strong><span style="font-family: 等线;font-size: 18px">Alert show up, such as</span></strong><strong><span style="font-family: 等线;font-size: 18px">“Current slot must be 1, when upgrade third-party firmware”</span></strong></h3><p style="text-align:center"><img src="http://support.doiting.com/static/ueditor/php/upload/image/1567132182675035.png" title="1567132182675035.png" alt="T8OE3LHP]O9LI[YF@MO7S4B.png"/></p><p style="text-align:center"><span style=";font-family:等线;font-size:16px">Fig. 8</span></p><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">It means that the firmware running on your device currently is not run on the first slot. Check your slot refer to 2.1</span></p><h3><strong><span style="font-family: 等线;font-size: 18px">3.2 </span></strong><strong><span style="font-family: 等线;font-size: 18px">None IP is listed when click</span></strong><strong><span style="font-family: 等线;font-size: 18px">“Scan device”</span></strong><strong><span style="font-family: 等线;font-size: 18px">&nbsp;button</span></strong></h3><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">Your computer must connect to the router you setup in step 2.2</span></p><p><span style=";font-family:等线;font-size: 16px">&nbsp;</span></p><h3><strong><span style="font-family: 等线;font-size: 18px">3.3 </span></strong><strong><span style="font-family: 等线;font-size: 18px">Create a third-party firmware</span></strong></h3><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">The third-party firmware you want to upgrade to must contain a bootloader. Plus, the firmware size must smaller than 512KB. Take the firmware developed based on ESP8266_NONOS_SDK as example to show you how to create a third-party firmware. At least two files are needed, which is the boot.bin and the user1.1024.new.2.bin. You can merge the two files into one bin via the “ESP8285 Download tool v3.6.4”. The combined bin file can be used as the third-party firmware.</span></p><p style="text-align:center"><img src="http://support.doiting.com/static/ueditor/php/upload/image/1567132485797059.png" title="1567132485797059.png" alt="PR])%UT@QQ(3[P`5_Y~XT`4.png"/></p><h3><strong><span style="font-family: 等线;font-size: 18px">3.4 u1.bin and u2.bin</span></strong><strong><span style="font-family: 等线;font-size: 18px">&nbsp;path</span></strong></h3><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">Do not input the u1.bin path to the text field for u2.bin by mistake, or the upgrade will be failed, and your device will not be able to run again!</span></p><h3><strong><span style="font-family: 等线;font-size: 18px">3.5 Change slot</span></strong></h3><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">To change slot, you need an extra firmware, the firmware is within the folder named “</span><span style=";font-family:等线;font-size: 16px">Dohome Zone switching firmware</span><span style=";font-family:等线;font-size: 16px">”. You can find the folder from the download link list in 1.1. There are two files named “u1.bin” and “u2.bin”, respectively.</span></p><p style="text-align:center"><img src="http://support.doiting.com/static/ueditor/php/upload/image/1567132301526847.png" title="1567132301526847.png" alt="60JFU55[ZR_9C_7@D{A~{B0.png"/></p><p style="text-align:center"><span style=";font-family:等线;font-size:16px">Fig. 10</span></p><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">Connect your device to your router and then run the upgrade tool on computer. Stay on the “</span><span style=";font-family:等线;font-size: 16px">DoHome Upgrade</span><span style=";font-family:等线;font-size: 16px">” tab view. Input the u1.bin and u2.bin (the extra firmware we mentioned previously) path, as shown in Fig. 10. To get device IP, you can click the “Scan device” button on the “Third-party upgrade” tab view, as shown in Fig. 11. Then input the IP it found. Notice that your computer must connect to the same router as the device.</span></p><p style="text-align: center;"><img src="http://support.doiting.com/static/ueditor/php/upload/image/1567132362242981.png" title="1567132362242981.png" alt="715WQYNTI)B7[2CTDX54KBX.png"/></p><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">In the “DoHome upgrade” tab view, click “Start upgrading” button to start upgrading. When upgrade progress is finished, check slot as step 2.1. If “slot=1” is shown on the info text field, you can go to step 2.2 to do next.</span></p><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">If you use the extra firmware to change slot, the device will create a new WiFi named as “Trans-xxxxxx”. The name is different from the name “Upgrade-xxxxxx”, which create by the transitional firmware we discussed in 2.3. Although the WiFi name is different, the rest steps are the same.</span></p><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">Connect your phone to the WiFi “</span><span style=";font-family:等线;font-size: 16px">Trans-xxxxxx</span><span style=";font-family:等线;font-size: 16px">”, the routers scanned by device will be list as following figure, which is a popup view shown automatically after connect to the WiFi.</span></p><p style="text-align:center">&nbsp; &nbsp; &nbsp;<img src="http://support.doiting.com/static/ueditor/php/upload/image/1567132409760530.png" title="1567132409760530.png"/> &nbsp; &nbsp;</p><p style="text-align:center"><span style=";font-family:等线;font-size:16px">Fig. 12</span></p><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">Select your router and input the password and then click “Join” button</span></p><h3><strong><span style="font-family: 等线;font-size: 18px">3.6 </span></strong><strong><span style="font-family: 等线;font-size: 18px">Cannot connect to the device’s WiFi</span></strong></h3><p style="text-indent:37px"><span style=";font-family:等线;font-size: 16px">Reboot your device and then reconnect again.</span></p><h3><strong><span style="font-family: 等线;font-size: 18px">3.7 </span></strong><strong><span style="font-family: 等线;font-size: 18px">Schematics for smart socket</span></strong></h3><p><span style=";font-family:等线;font-size:16px">Chip: ESP8285</span></p><p><span style="font-family: 等线;font-size: 16px">Technical support: support@doit.am</span></p><p style="text-align:center"><img src="http://support.doiting.com/static/ueditor/php/upload/image/1566289948473704.png" title="1566289948473704.png" alt="image.png" height="659"/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p>
<hr>
